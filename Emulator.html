<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="darkreader-lock">
    <meta name="title" content="Nightfall">
    <meta name="description" content="silly proxy">
    <meta name="og:title" content="Nightfall">
    <meta name="og:description" content="silly proxy">
    <meta property="og:image" content="https://dyinghynixmlc.github.io/Nightfall/assets/icon.ico">
    <meta property="og:image:width" content="1600">
    <meta property="og:image:height" content="1500">
    <title>Nightfall Proxy</title>
    <link rel="icon" href="https://dyinghynixmlc.github.io/Nightfall/assets/icon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <header class="header">
        <div class="logo">
            <img src="https://dyinghynixmlc.github.io/Nightfall/assets/bg_rm_rf.png" alt="Nightfall Logo">
        </div>
        <div class="title"><b>Emulator</b></div>
        <nav class="nav-links">
            <a href="https://dyinghynixmlc.github.io/Nightfall">Home</a>
            <a href="https://dyinghynixmlc.github.io/Nightfall/games.html">Games</a>
            <a href="https://dyinghynixmlc.github.io/Nightfall/settings.html">Settings</a>
            <a href="https://dyinghynixmlc.github.io/Nightfall/Emulator.html">Emulator</a>
        </nav>
    </header>
        <div id="top">
            <h1></h1>
         </div>
         <div id = box>
            <input type = file id = input>
        </div>
   <div id="box">
    <input type="file" id="input">
   </div>
<script>
<script>
  let emulator;

  // Load EmulatorJS
  const script = document.createElement("script");
  script.src = "./assets/loader.js"; // Ensure this file exists
  script.onload = () => {
    const canvas = document.createElement("canvas");
    canvas.width = 640;
    canvas.height = 480;
    document.body.appendChild(canvas);

    emulator = new EmulatorJS({
      canvas: canvas,
      systems: ["nes", "snes", "gba", "gb", "genesis"],
    });

    emulator.initialize();
  };
  document.body.appendChild(script);

  // Handle ROM Upload
  document.getElementById("input").addEventListener("change", (event) => {
    const file = event.target.files[0];
    if (file && emulator) {
      const reader = new FileReader();
      reader.onload = (e) => {
        const romData = new Uint8Array(e.target.result);
        emulator.loadROM(romData).then(() => emulator.start());
      };
      reader.readAsArrayBuffer(file);
    }
  });
</script>
</script>
    <footer class="footer">
      <span>Made with HATE by the <a href="https://github.com/DyingHynixMLC/Nightfall">Nightfall</a> team</span>
    </footer>
  </body>
</html>
